# Context Packages

## æ¦‚è¿°

Context Packages æ˜¯ SunnyCore æ¡†æ¶çš„ä¸Šä¸‹æ–‡æ¢å¾©ç³»çµ±ï¼Œç”¨æ–¼åœ¨å°è©±å£“ç¸®ï¼ˆautocompactï¼‰å¾Œæ¢å¾©ä»»å‹™ä¸Šä¸‹æ–‡ã€‚

## ç›®çš„

ç•¶ AI å°è©±é€²è¡Œè‡ªå‹•å£“ç¸®æ™‚ï¼Œä»»å‹™åŸ·è¡Œæ‰€éœ€çš„ä¸Šä¸‹æ–‡å¯èƒ½æœƒä¸Ÿå¤±ã€‚Context Packages ç³»çµ±é€šéä»¥ä¸‹æ–¹å¼è§£æ±ºé€™å€‹å•é¡Œï¼š

1. **é å®šç¾©çš„ä¸Šä¸‹æ–‡åŒ…**ï¼šæ¯å€‹ä»»å‹™éƒ½æœ‰ä¸€å€‹åŒ…æ–‡ä»¶ï¼Œå®šç¾©äº†åŸ·è¡Œè©²ä»»å‹™æ‰€éœ€çš„æ‰€æœ‰ä¸Šä¸‹æ–‡æ–‡ä»¶
2. **è‡ªå‹•æ¢å¾©æ©Ÿåˆ¶**ï¼šé€šé `context-restorer` å­ä»£ç†è‡ªå‹•è­˜åˆ¥é€²è¡Œä¸­çš„ä»»å‹™ä¸¦æ¢å¾©ä¸Šä¸‹æ–‡
3. **å„ªå…ˆç´šç®¡ç†**ï¼šç¢ºä¿ä¸Šä¸‹æ–‡æŒ‰æ­£ç¢ºçš„å„ªå…ˆç´šé †åºåŠ è¼‰ï¼ˆCLAUDE.md > commands > tasks > templatesï¼‰

## åŒ…æ–‡ä»¶çµæ§‹

æ¯å€‹åŒ…æ–‡ä»¶åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š

```markdown
# Context Package: {task-name}

## Task Information
- **Task Name**: {ä»»å‹™åç¨±}
- **Role**: {è§’è‰²åç¨±}
- **Description**: {ä»»å‹™æè¿°}

## Required Context Files

### 1. Command
{å‘½ä»¤æ–‡ä»¶è·¯å¾‘}

### 2. Task
{ä»»å‹™æ–‡ä»¶è·¯å¾‘}

### 3. Template
{æ¨¡æ¿æ–‡ä»¶è·¯å¾‘ï¼ˆå¦‚æœé©ç”¨ï¼‰}

### 4. Core Guidance
{CLAUDE.md è·¯å¾‘}

## Priority Order
1. CLAUDE.md (æœ€é«˜å„ªå…ˆç´š)
2. {command}.md (å‘½ä»¤ç´šæŒ‡å°)
3. {task}.md (ä»»å‹™ç´šæŒ‡å°)
4. {template}.yaml (æ¨¡æ¿çµæ§‹)

## Usage
ç•¶ docs/progress.md é¡¯ç¤ºæ­¤ä»»å‹™æ­£åœ¨é€²è¡Œæ™‚æ‡‰åŠ è¼‰æ­¤åŒ…ã€‚
```

## å¯ç”¨çš„åŒ…

### Product Manager (sunnycore_pm)
- `create-requirements.md` - å‰µå»ºéœ€æ±‚æ–‡æª”
- `create-prd.md` - å‰µå»ºç”¢å“éœ€æ±‚æ–‡æª”
- `create-epic.md` - å‰µå»º Epic å’Œä»»å‹™åˆ†è§£
- `create-plan.md` - å‰µå»ºå¯¦æ–½è¨ˆåŠƒ

### Architect (sunnycore_architect)
- `create-architecture.md` - å‰µå»ºæ¶æ§‹æ–‡æª”ï¼ˆç¶ åœ°é …ç›®ï¼‰
- `create-brownfield-architecture.md` - å‰µå»ºæ¶æ§‹æ–‡æª”ï¼ˆæ£•åœ°é …ç›®ï¼‰
- `document-project.md` - é …ç›®æ–‡æª”åŒ–

### Developer (sunnycore_dev)
- `develop-plan.md` - åŸ·è¡Œå¯¦æ–½è¨ˆåŠƒ
- `brownfield-plan.md` - åŸºæ–¼å¯©æŸ¥åé¥‹é‡æ–°é–‹ç™¼
- `fix-acceptance-issues.md` - ä¿®å¾©é©—æ”¶å•é¡Œ
- `develop-prd.md` - åŸºæ–¼ PRD é–‹ç™¼
- `init.md` - åˆå§‹åŒ–é …ç›®

### QA Engineer (sunnycore_qa)
- `review.md` - ç³»çµ±è³ªé‡è©•ä¼°å’Œä»£ç¢¼å¯©æŸ¥

### Product Owner (sunnycore_po)
- `curate-knowledge.md` - æ•´ç†å’Œçµ„ç¹”é …ç›®çŸ¥è­˜
- `conclude.md` - é …ç›®çµè«–å’Œå®Œæˆå ±å‘Š
- `cutover.md` - åˆ‡æ›è¨ˆåŠƒå’ŒåŸ·è¡Œ
- `validate-design.md` - é©—è­‰è¨­è¨ˆ
- `fix-design-conflicts.md` - è§£æ±ºè¨­è¨ˆè¡çª

### Assistant (sunnycore_assistant)
- `consult.md` - æä¾›è«®è©¢å’ŒæŒ‡å°
- `help.md` - å¹«åŠ©å’Œæ–‡æª”

## Context Restorer å­ä»£ç†

`context-restorer` æ˜¯ä¸€å€‹ç‰¹æ®Šçš„å­ä»£ç†ï¼Œè² è²¬åœ¨ autocompact å¾Œæ¢å¾©ä¸Šä¸‹æ–‡ï¼š

### å·¥ä½œæµç¨‹

1. **è‡ªå‹•è§¸ç™¼**ï¼šåœ¨ autocompact å¾Œè‡ªå‹•èª¿ç”¨
2. **è®€å–é€²åº¦**ï¼šå¾ `docs/progress.md` è®€å–ç•¶å‰é€²è¡Œä¸­çš„ä»»å‹™
3. **åŠ è¼‰åŒ…**ï¼šæ ¹æ“šä»»å‹™åç¨±åŠ è¼‰å°æ‡‰çš„ä¸Šä¸‹æ–‡åŒ…
4. **ç”ŸæˆæŒ‡ä»¤**ï¼šç”Ÿæˆä¸Šä¸‹æ–‡æ¢å¾©æŒ‡ä»¤åˆ—è¡¨
5. **æŒ‡å°ä»£ç†**ï¼šæŒ‡å°ä¸»ä»£ç†æŒ‰å„ªå…ˆç´šé †åºè®€å–æ‰€æœ‰å¿…éœ€æ–‡ä»¶

### è¼¸å‡ºæ ¼å¼

```
ğŸ”„ Context Restoration: RESTORED

Active Task Identified:
- Task: {task_name}
- Role: {role_name}
- Status: in_progress

Required Context Files (Priority Order):
1. {root}/sunnycore/CLAUDE.md (Core guidance)
2. {root}/sunnycore/commands/{command_file} (Role definition)
3. {root}/sunnycore/tasks/{task_file} (Task specification)
4. {root}/sunnycore/templates/{template_file} (Output format)

Context Loading Instructions:
Please read the above files in order to restore full task context and resume work.
```

## é€²åº¦è·Ÿè¹¤

Progress tracking æ˜¯ä¸€å€‹å®Œæ•´çš„ç”Ÿå‘½é€±æœŸç®¡ç†ç³»çµ±ï¼Œå¾ä»»å‹™é–‹å§‹åˆ°å®Œæˆéƒ½æœƒè‡ªå‹•è¿½è¹¤ã€‚

### ä»»å‹™é–‹å§‹æ™‚çš„è·Ÿè¹¤
æ‰€æœ‰å‘½ä»¤éƒ½è¦æ±‚åœ¨ä»»å‹™é–‹å§‹æ™‚æ›´æ–° `docs/progress.md`ï¼š

#### ç´„æŸæ¢ä»¶
æ¯å€‹å‘½ä»¤éƒ½åŒ…å«ä»¥ä¸‹ç´„æŸï¼š

```
**MUST** mark task as "in_progress" in "{PROGRESS}" at the start of task execution, 
**MUST NOT** skip progress tracking
```

### ä»»å‹™å®Œæˆæ™‚çš„è·Ÿè¹¤
`completion-validator` å­ä»£ç†æœƒåœ¨é©—è­‰ä»»å‹™æˆåŠŸå¾Œè‡ªå‹•æ›´æ–°é€²åº¦ï¼š

#### è‡ªå‹•å®Œæˆæ¨™è¨˜
- **è§¸ç™¼æ™‚æ©Ÿ**ï¼šç•¶ completion-validator é©—è­‰çµæœç‚º PASS æ™‚
- **åŸ·è¡Œå‹•ä½œ**ï¼šå°‡ä»»å‹™ç‹€æ…‹å¾ "in_progress" æ”¹ç‚º "completed"
- **ç´„æŸæ¢ä»¶**ï¼šåªåœ¨é©—è­‰é€šéæ™‚æ›´æ–°ï¼Œé©—è­‰å¤±æ•—æ™‚ä¿æŒåŸç‹€æ…‹

#### Completion-Validator ç´„æŸ
```
**MUST** mark task as "completed" in {PROGRESS} after validation PASS, 
**MUST NOT** update progress on validation FAIL
```

### Progress.md æ ¼å¼ç¯„ä¾‹

```markdown
# Project Progress

## Current Tasks

- [completed] create-requirements - å‰µå»ºéœ€æ±‚æ–‡æª” (ç”± completion-validator è‡ªå‹•æ¨™è¨˜)
- [in_progress] create-architecture - å‰µå»ºæŠ€è¡“æ¶æ§‹æ–‡æª” (ç”± command æ‰‹å‹•æ¨™è¨˜)
- [pending] create-plan - å‰µå»ºå¯¦æ–½è¨ˆåŠƒ
```

### é€²åº¦ç‹€æ…‹æµè½‰

```
[pending] 
   â†“ (ä»»å‹™é–‹å§‹æ™‚ï¼Œç”± command æ›´æ–°)
[in_progress] 
   â†“ (ä»»å‹™å®Œæˆé©—è­‰é€šéå¾Œï¼Œç”± completion-validator è‡ªå‹•æ›´æ–°)
[completed]
```

## ä½¿ç”¨æµç¨‹

### 1. ä»»å‹™é–‹å§‹
ç•¶ä»£ç†é–‹å§‹åŸ·è¡Œä»»å‹™æ™‚ï¼š
1. æ›´æ–° `docs/progress.md`ï¼Œå°‡ä»»å‹™æ¨™è¨˜ç‚º `in_progress`
2. è®€å–æ‰€éœ€çš„ä¸Šä¸‹æ–‡æ–‡ä»¶ï¼ˆCLAUDE.md, command, task, templateï¼‰
3. é–‹å§‹åŸ·è¡Œä»»å‹™æ­¥é©Ÿ

### 1.5 ä»»å‹™å®Œæˆé©—è­‰
ç•¶ä»£ç†å®Œæˆä»»å‹™ä¸¦èª¿ç”¨ completion-validator æ™‚ï¼š
1. completion-validator é©—è­‰æ‰€æœ‰ DoD é …ç›®
2. å¦‚æœé©—è­‰ PASSï¼š
   - è‡ªå‹•å°‡ `docs/progress.md` ä¸­çš„ä»»å‹™ç‹€æ…‹å¾ `in_progress` æ”¹ç‚º `completed`
   - åœ¨é©—è­‰å ±å‘Šä¸­é¡¯ç¤ºé€²åº¦æ›´æ–°ç‹€æ…‹
3. å¦‚æœé©—è­‰ FAILï¼š
   - ä¿æŒä»»å‹™ç‹€æ…‹ç‚º `in_progress`
   - ç­‰å¾…å•é¡Œä¿®å¾©å¾Œé‡æ–°é©—è­‰

### 2. Autocompact ç™¼ç”Ÿ
ç•¶å°è©±è¢«å£“ç¸®æ™‚ï¼š
1. ç³»çµ±è‡ªå‹•èª¿ç”¨ `context-restorer` å­ä»£ç†
2. `context-restorer` è®€å– `docs/progress.md`
3. è­˜åˆ¥æ‰€æœ‰ `in_progress` ç‹€æ…‹çš„ä»»å‹™

### 3. ä¸Šä¸‹æ–‡æ¢å¾©
`context-restorer` ç‚ºæ¯å€‹é€²è¡Œä¸­çš„ä»»å‹™ï¼š
1. åŠ è¼‰å°æ‡‰çš„åŒ…æ–‡ä»¶
2. æå–æ‰€éœ€çš„ä¸Šä¸‹æ–‡æ–‡ä»¶åˆ—è¡¨
3. ç”ŸæˆæŒ‰å„ªå…ˆç´šæ’åºçš„æ–‡ä»¶åˆ—è¡¨
4. æŒ‡å°ä¸»ä»£ç†è®€å–æ‰€æœ‰æ–‡ä»¶

### 4. ä»»å‹™ç¹¼çºŒ
ä¸»ä»£ç†ï¼š
1. æŒ‰å„ªå…ˆç´šé †åºè®€å–æ‰€æœ‰æŒ‡å®šçš„æ–‡ä»¶
2. æ¢å¾©å®Œæ•´çš„ä»»å‹™ä¸Šä¸‹æ–‡
3. ç¹¼çºŒåŸ·è¡Œä»»å‹™

## å„ªå…ˆç´šå±¤æ¬¡

ä¸Šä¸‹æ–‡åŠ è¼‰éµå¾ªä»¥ä¸‹å„ªå…ˆç´šï¼š

1. **CLAUDE.md** (æœ€é«˜) - æ ¸å¿ƒåŸ·è¡Œè¦å‰‡å’ŒæŒ‡å°
2. **Commands** - è§’è‰²å®šç¾©å’Œç¯„åœé™åˆ¶
3. **Tasks** - ä»»å‹™ç‰¹å®šçš„æ­¥é©Ÿå’Œ DoD
4. **Templates** - è¼¸å‡ºæ ¼å¼å’Œçµæ§‹

ç•¶å‡ºç¾è¡çªæ™‚ï¼Œå„ªå…ˆç´šé«˜çš„è¦å‰‡è¦†è“‹å„ªå…ˆç´šä½çš„è¦å‰‡ã€‚

## å¾Œå‚™ç­–ç•¥

å¦‚æœæ‰¾ä¸åˆ°ç‰¹å®šä»»å‹™çš„åŒ…æ–‡ä»¶ï¼Œ`context-restorer` æœƒä½¿ç”¨å¾Œå‚™ç­–ç•¥ï¼š

1. è­˜åˆ¥ä»»å‹™æ‰€å±¬çš„è§’è‰²
2. ä½¿ç”¨é»˜èªä¸Šä¸‹æ–‡é›†ï¼š
   - CLAUDE.md
   - sunnycore_{role}.md
   - {task_name}.md
3. åœ¨å ±å‘Šä¸­è¨»æ˜ä½¿ç”¨äº†å¾Œå‚™ç­–ç•¥

## ç¶­è­·æŒ‡å—

### æ·»åŠ æ–°ä»»å‹™åŒ…

1. åœ¨ `packages/` ç›®éŒ„ä¸‹å‰µå»ºæ–°çš„ `.md` æ–‡ä»¶
2. éµå¾ªæ¨™æº–åŒ…æ–‡ä»¶çµæ§‹
3. ç¢ºå®šä»»å‹™æ‰€éœ€çš„æ‰€æœ‰ä¸Šä¸‹æ–‡æ–‡ä»¶
4. æŒ‰å„ªå…ˆç´šåˆ—å‡ºæ–‡ä»¶
5. åœ¨æ­¤ README ä¸­æ›´æ–°å¯ç”¨åŒ…åˆ—è¡¨

### æ›´æ–°ç¾æœ‰åŒ…

1. ç•¶ä»»å‹™éœ€è¦é¡å¤–çš„ä¸Šä¸‹æ–‡æ–‡ä»¶æ™‚æ›´æ–°åŒ…
2. ç•¶æ¨¡æ¿çµæ§‹è®ŠåŒ–æ™‚æ›´æ–°åŒ…
3. ä¿æŒå„ªå…ˆç´šé †åºä¸è®Š

### æ¸¬è©¦ä¸Šä¸‹æ–‡æ¢å¾©

1. é–‹å§‹ä¸€å€‹ä»»å‹™ä¸¦æ¨™è¨˜ç‚º `in_progress`
2. æ¨¡æ“¬ autocompactï¼ˆæ‰‹å‹•èª¿ç”¨ `context-restorer`ï¼‰
3. é©—è­‰æ‰€æœ‰å¿…éœ€çš„æ–‡ä»¶éƒ½è¢«åˆ—å‡º
4. ç¢ºèªå„ªå…ˆç´šé †åºæ­£ç¢º

## æ³¨æ„äº‹é …

- **ä¸è¦**ç›´æ¥ä¿®æ”¹ `context-restorer.md` å­ä»£ç†ï¼Œé™¤ééœ€è¦æ”¹è®Šæ¢å¾©é‚è¼¯
- **å§‹çµ‚**åœ¨é–‹å§‹ä»»å‹™æ™‚æ›´æ–° `progress.md`
- **ç¢ºä¿**åŒ…æ–‡ä»¶ä¸­çš„è·¯å¾‘ä½¿ç”¨ `{root}` è®Šé‡è€Œä¸æ˜¯çµ•å°è·¯å¾‘
- **ä¿æŒ**åŒ…æ–‡ä»¶çš„çµæ§‹ä¸€è‡´æ€§ï¼Œæ–¹ä¾¿ç¶­è­·

## ç›¸é—œæ–‡ä»¶

- `agents/context-restorer.md` - ä¸Šä¸‹æ–‡æ¢å¾©å­ä»£ç†å®šç¾©ï¼ˆautocompact å¾Œæ¢å¾©ä¸Šä¸‹æ–‡ï¼‰
- `agents/completion-validator.md` - å®Œæˆé©—è­‰å­ä»£ç†å®šç¾©ï¼ˆé©—è­‰ DoD ä¸¦è‡ªå‹•æ¨™è¨˜ä»»å‹™å®Œæˆï¼‰
- `commands/*.md` - æ‰€æœ‰å‘½ä»¤æ–‡ä»¶ï¼ˆåŒ…å«ä»»å‹™é–‹å§‹æ™‚çš„é€²åº¦è·Ÿè¹¤ç´„æŸï¼‰
- `tasks/*.md` - æ‰€æœ‰ä»»å‹™æ–‡ä»¶
- `templates/*.yaml` - æ‰€æœ‰æ¨¡æ¿æ–‡ä»¶
- `CLAUDE.md` - æ ¸å¿ƒæŒ‡å°æ–‡æª”

## ç‰ˆæœ¬æ­·å²

- **v1.1** - é€²åº¦è¿½è¹¤å¢å¼·
  - æ›´æ–° completion-validator ä»¥è‡ªå‹•æ¨™è¨˜ä»»å‹™å®Œæˆ
  - å®Œå–„äº†ä»»å‹™ç‹€æ…‹çš„å®Œæ•´ç”Ÿå‘½é€±æœŸç®¡ç†
  - æ·»åŠ äº†é€²åº¦æ›´æ–°é‚è¼¯å’ŒéŒ¯èª¤è™•ç†

- **v1.0** - åˆå§‹å¯¦ç¾
  - å‰µå»ºäº†æ‰€æœ‰ä»»å‹™çš„ä¸Šä¸‹æ–‡åŒ…
  - å¯¦ç¾äº† context-restorer å­ä»£ç†
  - æ›´æ–°äº†æ‰€æœ‰å‘½ä»¤ä»¥æ”¯æŒä»»å‹™é–‹å§‹æ™‚çš„é€²åº¦è·Ÿè¹¤

