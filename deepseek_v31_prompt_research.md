# DeepSeek V3.1 提示词偏好深度研究

## 核心发现总结

DeepSeek V3.1 在提示词设计方面展现出**独特的简洁性偏好**，与 Claude 对 XML 格式的特别敏感性形成鲜明对比。其核心哲学是"**无技巧即技巧**"（The Art of No Art）。

## 一、格式敏感性分析

### 1.1 结构化格式偏好

**支持的结构化格式（按优先级排序）：**

1. **XML 标签** - 特别适合边界清晰的任务
   ```xml
   <context>
   你是一个专业的代码审查员...
   </context>
   
   <task>
   分析以下代码的时间复杂度
   </task>
   ```

2. **Markdown 格式** - 触发序列标记感知
   ```markdown
   ## 任务描述
   ### 步骤一：分析
   ### 步骤二：优化
   ```

3. **分段标记** - 使用清晰的分隔符
   ```
   [任务] 生成API文档
   [要求] 包含错误处理
   [输出] JSON格式
   ```

### 1.2 与 Claude 的对比

| 特性 | DeepSeek V3.1 | Claude |
|------|---------------|---------|
| XML 敏感性 | 中等支持 | **极高敏感** |
| Markdown 偏好 | **高度支持** | 中等支持 |
| 简洁性要求 | **核心要求** | 适中 |
| 结构复杂度 | 偏好简单结构 | 支持复杂嵌套 |

## 二、独特的混合推理架构

### 2.1 Thinking Tokens 机制

DeepSeek V3.1 引入了独特的 **`<think>` 和 `</think>` 标记**：

```
非思考模式模板：
<｜begin▁of▁sentence｜>{system prompt}<｜User｜>{query}<｜Assistant｜></think>

思考模式模板：
<｜User｜>{query}<｜Assistant｜><think>
```

### 2.2 双模式切换特性

- **非思考模式**：快速响应，适合简单对话
- **思考模式**：深度推理，适合复杂问题解决

这种架构让 DeepSeek V3.1 对**模式提示词**特别敏感。

## 三、提示词工程最佳实践

### 3.1 三大核心原则

基于研究发现，DeepSeek V3.1 遵循**清晰、结构、细节**三原则：

#### 原则一：清晰性（Clarity）
- **避免模糊指令**：❌ "帮我写点代码" → ✅ "用Python实现二分搜索算法"
- **明确输出格式**：直接说明期望的结果形式

#### 原则二：结构性（Structure）
- **分层提示**：使用标题、子标题组织复杂任务
- **序列化指令**：将复杂任务分解为步骤

#### 原则三：详细性（Details）
- **提供约束条件**：限制探索空间，提高准确性
- **包含上下文**：给出相关背景信息

### 3.2 反模式（应避免的做法）

**强烈不推荐：**
- ❌ **Few-shot 提示**：会显著降低性能
- ❌ **复杂系统提示**：推荐避免使用 system prompt
- ❌ **过长的示例**：会分散注意力机制
- ❌ **显式CoT提示**：模型已内建推理能力

## 四、特定场景的格式敏感性

### 4.1 编程任务

**最优格式：**
```xml
<purpose>
你是全栈Next.js专家，专注于可扩展的Web应用
</purpose>

<planning_rules>
- 创建4步计划（设置、实现、测试、部署）
- 优化Next.js最佳实践
</planning_rules>

<format_rules>
- 使用代码块展示组件
- 分离前后端逻辑
</format_rules>
```

### 4.2 推理任务

**推荐使用简洁指令：**
```
计算以下问题：
1. 平均速度
2. 时间转换为分钟  
3. 速度转换为千米/小时

展示推理过程。
```

### 4.3 工具调用

DeepSeek V3.1 对**工具调用格式**高度敏感：

```
<｜tool▁calls▁begin｜>
<｜tool▁call▁begin｜>search<｜tool▁sep｜>{"query": "最新AI发展"}
<｜tool▁call▁end｜>
<｜tool▁calls▁end｜>
```

## 五、性能调优建议

### 5.1 采样参数

- **Temperature**: 0.5-0.7（推荐0.6）
- **Top-p**: 0.95
- **避免无限循环**：适当的随机性设置

### 5.2 强制思考模式

在某些情况下，可以显式要求：
```
请从<think>标签开始思考这个问题...
```

## 六、实际应用案例

### 6.1 代码生成

**高效提示模板：**
```markdown
## 任务
生成响应式登录组件

## 技术栈
- React + TypeScript
- Tailwind CSS
- 表单验证

## 要求
- 清晰的错误提示
- 移动端适配
- 无障碍设计
```

### 6.2 数据分析

**结构化查询：**
```xml
<context>
数据库性能优化专家，10年经验
</context>

<task>
分析查询执行计划并提供优化建议
</task>

<output_format>
- 原始查询 vs 优化查询对比
- 索引策略说明
- 性能提升预估
</output_format>
```

## 七、与其他模型的差异化

### 7.1 相比 Claude
- **简洁性** > 复杂结构化
- **零样本** > 多样本示例
- **直接指令** > 引导式对话

### 7.2 相比 GPT
- **结构敏感** > 自然对话
- **推理显式** > 推理隐式
- **格式要求** > 灵活性

## 八、未来优化方向

### 8.1 当前限制
- 结构化输出支持有限
- 某些专业任务不如专用推理模型
- 中英混合响应问题

### 8.2 建议改进
- 增强JSON/YAML格式支持
- 优化多语言一致性
- 提升创意任务表现

## 结论

DeepSeek V3.1 的提示词策略强调**简洁、直接、结构化**，其"无技巧即技巧"的设计哲学要求用户摒弃复杂的提示工程技巧，转而采用清晰明确的指令。

**核心takeaway：**
1. **越简单越有效** - 避免过度工程化
2. **结构胜过技巧** - 使用清晰的格式而非复杂的引导
3. **零样本为王** - 直接描述任务而非给出示例
4. **思考模式切换** - 根据任务复杂度选择合适模式

这种设计让 DeepSeek V3.1 在保持高性能的同时，大大降低了用户的提示词工程门槛。