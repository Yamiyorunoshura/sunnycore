---
# Development Notes Template v2
# Powered by BMAD™ Core

template:
  id: dev-notes-template-v2
  name: Development Notes
  version: 2.0
  output:
    format: markdown
    filename: "{DEVNOTES}/{task_id}-dev-notes.md"
    alternate: "{root}/docs/prd-dev-notes.md (for PRD workflow)"
    title: "Task-{task_id} Development Notes: {task_name}"
    note: "Record of actual implementation, decisions, and outcomes"

sections:
  - id: notes-header
    title: Development Information
    instruction: |
      **Task ID:** {task_id}
      **Task Name:** {task_name}
      **Plan Reference:** {path to implementation plan}
      **Developer:** {agent or person name}
      **Start Date:** {date}
      **Completion Date:** {date}
      **Actual Duration:** {duration}
      **Status:** Completed / In Progress / Blocked

  - id: implementation-summary
    title: Implementation Summary
    instruction: |
      Provide a high-level summary (3-5 paragraphs) covering:
      
      - **Requirements Covered:** Which functional and non-functional requirements (REQ/NFR IDs) were implemented
      - **Key Features Implemented:** Main capabilities delivered
      - **Overall Approach:** High-level technical approach taken
      - **TDD Cycle Completion:** Confirm RED → GREEN → REFACTOR cycle was followed
      - **Alignment with Plan:** How closely implementation followed the plan
      
      This summary should give a complete picture without requiring reading the entire document.

  - id: technical-decisions
    title: Technical Decisions
    repeatable: true
    instruction: |
      Document significant technical decisions made during implementation:
      
      **Decision:** {What was decided}
      
      **Context:** {Situation that required this decision}
      
      **Rationale:** {Why this decision was made}
      
      **Alternatives Considered:** {Other options evaluated}
      
      **Impact:** {Effect on the codebase, performance, maintainability}
      
      Examples of technical decisions:
      - Choice of algorithm or data structure
      - Library selection
      - API design choices
      - Error handling approach
      - Performance optimization strategy

  - id: challenges-and-solutions
    title: Challenges and Solutions
    repeatable: true
    instruction: |
      Record challenges encountered and how they were resolved:
      
      **Challenge:** {Description of the problem}
      
      **Context:** {When/where this occurred}
      
      **Solution:** {How it was resolved}
      
      **Lessons Learned:** {What was learned from this experience}
      
      Include both technical challenges (bugs, integration issues) and process challenges.
      These lessons inform future work and knowledge base.

  - id: deviations-from-plan
    title: Deviations from Implementation Plan
    repeatable: true
    instruction: |
      Document any deviations from the original implementation plan:
      
      **Deviation:** {What changed from the plan}
      
      **Original Plan:** {What the plan specified}
      
      **Actual Implementation:** {What was actually done}
      
      **Rationale:** {Why the deviation was necessary}
      
      **Impact:** {Effect on requirements, architecture, other tasks}
      
      If no deviations occurred, state: "Implementation followed the plan without deviations."
      
      Common deviation reasons:
      - Discovered better approach during implementation
      - Unforeseen technical constraints
      - Changed requirements
      - Integration complexities

  - id: implementation-details
    title: Implementation Details
    instruction: |
      **Files Created:**
      - {file_path} - {purpose}
      - {file_path} - {purpose}
      
      **Files Modified:**
      - {file_path} - {changes made}
      - {file_path} - {changes made}
      
      **Configuration Changes:**
      - {config_file} - {what was added/modified}
      
      **Database Changes:**
      - Migrations executed
      - Schema modifications
      - Seed data added
      
      **Dependencies Added:**
      - {package@version} - {purpose}
      
      **Key Components Implemented:**
      - **{Component/Class/Function Name}:** {brief description and location}
      - **{Component/Class/Function Name}:** {brief description and location}
      
      Provide enough detail for another developer to understand what was built and where to find it.

  - id: testing
    title: Testing
    instruction: |
      **TDD Cycle Summary:**
      Provide evidence that RED → GREEN → REFACTOR cycle was followed:
      - RED: {number} tests written, all initially failed
      - GREEN: Minimal implementation created, all tests passed
      - REFACTOR: {improvements made} while maintaining green tests
      
      **Test Coverage:**
      - **Percentage:** {coverage_percentage}%
      - **Critical Paths Covered:** Yes / No (if no, explain why)
      - **Coverage Tool Output:** {brief summary or link}
      
      **Test Results:**
      - **Unit Tests:** {count} tests, all passing
      - **Integration Tests:** {count} tests, all passing
      - **E2E Tests:** {count} tests (if applicable), all passing
      - **Total Test Execution Time:** {duration}
      
      **All Tests Passed:** Yes / No
      
      If any tests failed:
      - Explain why tests are not passing
      - Document plan to fix
      - This should be exceptional - default is all tests pass
      
      **Test Files:**
      - {test_file_path} - {what it tests}

  - id: known-issues
    title: Known Issues
    repeatable: true
    instruction: |
      Document any known issues or limitations:
      
      **Issue:** {Description}
      
      **Severity:** Critical / High / Medium / Low
      
      **Workaround:** {Temporary solution if any}
      
      **Tracking:** {Issue tracker ID or plan to address}
      
      If no known issues, state: "No known issues at time of completion."

  - id: technical-debt
    title: Technical Debt
    repeatable: true
    instruction: |
      Document any technical debt incurred:
      
      **Item:** {Description of debt}
      
      **Reason:** {Why this debt was taken on}
      
      **Mitigation Plan:** {How/when it will be addressed}
      
      **Priority:** Critical / High / Medium / Low
      
      Technical debt examples:
      - TODO comments for future refactoring
      - Temporary workarounds
      - Missing error handling
      - Performance optimizations deferred
      - Test coverage gaps
      
      If no technical debt, state: "No technical debt incurred."

  - id: brownfield-fix-details
    title: Brownfield Fix Details
    instruction: |
      **NOTE:** This section is ONLY included when fixing code that failed review.
      For initial development, skip this section.
      
      **Review Reference:** {path to review report that triggered this fix}
      **Original Dev Notes:** {path to original dev notes}
      **Review Decision:** Accept with Changes / Reject
      
      ### Root-Cause Traceability Table
      
      | Symptom | Root Cause | Architecture Ref | Changed Files | Affected Tests | Verification Evidence |
      |---------|-----------|------------------|---------------|----------------|----------------------|
      | {test failure or issue} | {underlying cause} | {ARCH section/ADR} | {file.ext:L10-25} | {test_name} | {log/output/metric} |
      | {example: test_auth_expired failing} | {example: Missing JWT expiry validation} | {example: ADR-012: Security} | {example: auth.js:L45-52} | {example: test_auth_expired} | {example: Test now passes, logs show "token_expired" event} |
      
      **Analysis Method:**
      Document how you connected the three sources:
      - Dev Notes revealed: {what original implementation did}
      - Review identified: {what issues were found}
      - Architecture required: {what should have been done}
      - Root cause identified: {gap between implementation and architecture}
      
      ### Change Diff Summary
      
      For each fix applied:
      
      **Fix #{number}: {Issue Title}**
      
      - **File:** `{path/to/file.ext}`
      - **Lines:** L{start}-{end}
      - **Issue:** {issue from review}
      - **Root Cause:** {from traceability table}
      - **Fix Strategy:** {what was changed and why}
      - **Architecture Alignment:** {ADR/component/pattern followed}
      - **Impact:** Critical Path / Shared Module / Isolated Feature
      
      **Code Changes:**
      ```{language}
      // Before (problematic code)
      {original code snippet}
      
      // After (fixed code)
      {fixed code snippet}
      ```
      
      ### TDD Cycle Evidence
      
      Document RED → GREEN → REFACTOR cycle for each fix:
      
      **Fix #{number}:**
      - **RED:** Ran {test_name}, confirmed failure with error: "{error_message}"
      - **GREEN:** Implemented minimal fix, test passed
      - **REFACTOR:** {refactoring performed while keeping tests green}
      - **VERIFY:** Full test suite passed ({count} tests)
      
      ### Quality Gate Results
      
      - [ ] **Full test suite:** PASS ({count} unit + {count} integration + {count} e2e)
      - [ ] **Test coverage:** {percentage}% (baseline: {baseline}%, change: +{delta}%)
      - [ ] **Static analysis:** 0 errors
      - [ ] **Contract tests:** PASS (API/events/messages)
      - [ ] **Performance:** p95={value}ms (baseline: {baseline}ms, change: +{delta}%)
      - [ ] **Backward compatibility:** PASS
      
      ### Observability Enhancements
      
      **Logs Added:**
      - File: {file_path}
      - Log: `{log_message}` with fields: {correlation_id, entity_id, etc.}
      - Level: ERROR / WARN / INFO
      - Purpose: {why this log was added}
      
      **Metrics Added:**
      - Metric: `{metric_name}{labels}`
      - Type: Counter / Histogram / Gauge
      - Purpose: {what this measures}
      - Alert condition: {threshold that triggers alert}
      
      **Traces Enhanced:**
      - Span: {span_name}
      - Tags added: {tag_name=value}
      - Purpose: {what this trace reveals}
      
      **Alert Definitions:**
      - Condition: {metric_name > threshold}
      - Severity: Critical / High / Medium
      - Action: {who gets paged, runbook link}
      
      ### Verification Evidence
      
      **Test Output:**
      ```
      {paste relevant test execution output showing all tests passing}
      ```
      
      **Performance Results:**
      ```
      Baseline: p95=120ms, p99=180ms
      After fix: p95=125ms (+4.2%), p99=195ms (+8.3%)
      Load test: 2x traffic (1000 req/s) for 5 min, 0 failures
      ```
      
      **Code Quality:**
      ```
      Linter: 0 errors, 0 warnings
      Type checker: 0 errors
      Security scan: No vulnerabilities introduced
      ```
      
      ### Migration Notes (if applicable)
      
      **Database Migration:**
      - Migration script: {path/to/migration}
      - Rollback script: {path/to/rollback}
      - Tested: Up migration ✓, Down migration ✓
      
      **API Contract Changes:**
      - Version bumped: v{old} → v{new}
      - Breaking changes: {description or "None"}
      - Deprecation timeline: {timeline or "N/A"}
      - Migration guide: {link or inline instructions}
      
      **Backward Compatibility:**
      - Strategy: {how compatibility maintained}
      - Legacy support: {timeline}
      
      If no migrations needed, state: "No database or API migrations required."

  - id: documentation-updates
    title: Documentation Updates
    instruction: |
      List any documentation that was updated or created:
      - API documentation
      - README updates
      - Architecture diagram changes
      - Configuration documentation
      - User guides
      
      If no documentation updates needed, state: "No additional documentation updates required."

  - id: next-steps
    title: Next Steps and Recommendations
    instruction: |
      **Immediate Next Steps:**
      - Tasks that should be started next
      - Any blocking issues that need resolution
      
      **Recommendations:**
      - Suggestions for future improvements
      - Related features to consider
      - Areas that may need attention
      
      **Handoff Notes:**
      - Information for next developer or reviewer
      - Context that will be helpful

  - id: references
    title: References
    instruction: |
      **Implementation Plan:** {path to plan file}
      
      **Related Documentation:**
      - {document_path} - {relevance}
      - {document_path} - {relevance}
      
      **External Resources:**
      - {URL} - {what was referenced}
      - {URL} - {what was referenced}
      
      List all resources consulted during implementation.
