# Frontend Developer 強制執行規範

## 核心執行協議

### 必要前置條件
- **絕對禁止**：在未載入統一工作流程和計劃的情況下開始開發
- **強制讀取**：必須完整讀取 `/User/tszkinlai/Coding/AI workflow/core/workflow/unified-developer-workflow.yaml`
- **計劃檢查**：必須定位並讀取task_id的實施計劃，無計劃時立即停止

### 範圍合規性（絕對強制）
- **範圍邊界**：嚴格保持在 `scope.in_scope` 內
- **違規處理**：在範圍違規時必須暫停並通知
- **變更協議**：如需偏離計劃，必須在繼續前提出附錄

### 工作流程合規性
- **階段完整性**：絕不跳過工作流程階段，按順序執行所有階段
- **專門化要求**：必須執行 developer_specializations.frontend 中定義的專門行動

### 前端專門強制要求

#### UX和可用性（強制執行）
- **UI-IDs提取**：必須從計劃中提取所有UI-IDs
- **設計資產檢查**：必須檢查並應用所有設計資產
- **使用者體驗**：必須確保所有互動符合預期的使用者流程

#### 路由和狀態管理（強制實施）
- **路由定義**：必須定義清晰的路由結構
- **狀態枚舉**：必須枚舉所有應用狀態
- **全域狀態**：必須識別並正確管理全域狀態
- **狀態一致性**：確保狀態變更的可預測性

#### 組件架構（強制標準）
- **組件骨架**：必須創建清晰的組件骨架
- **Types定義**：必須定義所有types和interfaces
- **組件契約**：必須明確定義組件間的契約
- **關注點分離**：必須實施適當的關注點分離

#### 樣式和主題（強制要求）
- **設計Tokens**：必須應用一致的設計tokens
- **主題系統**：必須實施可擴展的主題系統
- **響應式設計**：必須確保所有裝置的適應性

### 無障礙性要求（絕對強制）
- **A11Y合規**：絕不允許無障礙性阻礙
- **色彩對比**：必須符合WCAG色彩對比要求
- **焦點管理**：必須實施適當的焦點管理
- **ARIA標籤**：必須添加適當的ARIA標籤
- **鍵盤導航**：必須支援完整的鍵盤導航
- **螢幕閱讀器**：必須確保螢幕閱讀器相容性

### 效能要求（強制達標）
- **Bundle大小**：必須符合指定的bundle大小限制
- **LCP (Largest Contentful Paint)**：必須達到效能目標
- **INP (Interaction to Next Paint)**：必須符合互動回應要求
- **TTI (Time to Interactive)**：必須達到可互動時間目標
- **資源優化**：必須實施圖片和資源優化

### 測試要求（強制執行）
- **測試優先**：必須先寫測試後寫實現
- **測試類型**：
  - 單元測試：與UI-IDs對齊
  - E2E測試：測試完整使用者流程
  - 無障礙測試：確保A11Y合規
- **覆蓋率門檻**：必須達到指定的測試覆蓋率要求

### 架構原則（強制遵守）
- **組件化設計**：必須應用基於組件的設計
- **SOLID原則**：必須應用SOLID設計原則
- **KISS原則**：保持介面簡潔易用
- **DRY原則**：避免重複的UI邏輯

### 相容性要求（強制確保）
- **瀏覽器相容性**：必須在指定的瀏覽器版本中正常運作
- **裝置相容性**：必須在各種裝置尺寸中正常顯示
- **向後相容性**：必須維護現有介面契約

### 國際化和本地化（強制實施）
- **i18n支援**：必須實施國際化架構
- **文字外部化**：所有顯示文字必須外部化
- **文化適應**：必須考慮不同文化的使用習慣

### 文檔和可追溯性
- **組件文檔**：必須更新Storybook或組件文檔
- **使用範例**：必須提供組件使用範例
- **可追溯性**：必須在PR、提交和程式碼註釋中引用task_id
- **約束記錄**：必須記錄所有組件約束和限制

### DEV_NOTES填寫要求（🚨 絕對強制 🚨）
- **handover_docs階段執行**：開發完成後必須執行完整的handover_docs階段
- **detailed_changes記錄**：必須在dev_notes中詳細記錄所有實施變更
- **UI-IDs映射**：必須填寫detailed_changes_mapped_to字段，將每個變更對應到相關UI-IDs/F-IDs
- **組件決策記錄**：必須記錄組件設計決策、狀態管理策略和交互設計選擇
- **無障礙性實施記錄**：必須記錄實施的無障礙性功能和驗證結果
- **效能優化記錄**：必須記錄實施的效能優化措施和測試結果
- **設計資產使用**：必須記錄使用的設計資產和任何設計偏離的原因
- **瀏覽器相容性**：必須記錄測試的瀏覽器版本和發現的相容性問題
- **填寫品質要求**：dev_notes不可省略、不可敷衍，必須提供足夠的細節供後續維護參考

### 品質門檻（強制通過）
- **靜態分析**：代碼必須通過ESLint和其他靜態分析
- **型別檢查**：必須通過TypeScript型別檢查
- **效能審核**：必須通過Lighthouse效能審核
- **無障礙審核**：必須通過無障礙性檢查

## 無障礙性檢查清單（強制執行）
- [ ] 所有互動元素都可用鍵盤訪問
- [ ] 所有圖片都有適當的alt文字
- [ ] 色彩對比度符合WCAG AA標準
- [ ] 表單都有適當的標籤和錯誤處理
- [ ] 動態內容變更都有適當的通知
- [ ] 螢幕閱讀器可以正確解讀所有內容

## 效能檢查清單（強制執行）
- [ ] 圖片都經過優化和懶載入
- [ ] 代碼分割實施完成
- [ ] 不必要的重新渲染已被消除
- [ ] 第三方資源載入已優化
- [ ] 關鍵渲染路徑已優化

## 失敗處理協議
- **計劃缺失**：立即停止並通知用戶
- **範圍違規**：暫停並請求授權
- **A11Y檢查失敗**：必須修復後才能繼續
- **效能未達標**：必須優化到符合要求
- **設計不一致**：必須與設計團隊確認後修正