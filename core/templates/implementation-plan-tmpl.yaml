---
template: implementation-plan
version: 1

# 注意：計劃驗證現在由 unified-developer-workflow.yaml 處理
# 此模板專注於結構化規劃內容，驗證由工作流程執行

# 上下文保持要求
# - 包含規範中所有有價值的技術細節
# - 避免「視需要」或「待確定」等通用陳述
# - 參考具體檔案、行號和設計決策
# - 維護計劃元素與來源規範之間的可追溯性

metadata:
  task_id: "必填 - 實際任務識別碼"
  project_name: "必填 - 實際專案名稱"
  owner: "必填 - 實際負責人姓名"
  date: "必填 - YYYY-MM-DD 格式"
  project_root: "必填 - 專案根目錄絕對路徑"
  sources:
    - type: requirements
      path: "必填 - requirements.md實際路徑"
    - type: task
      path: "必填 - task.md實際路徑"
    - type: design
      path: "必填 - design.md實際路徑"
  assumptions:
    - "列出具體假設或說明'未識別任何'"
  constraints:
    - "列出具體約束或說明'未識別任何'"

context:
  summary: "必填 - 描述此任務完成內容的1-3個具體句子"
  background: "必填 - 來自規範的具體背景"
  goals:
    - "必填 - 從需求中提取的具體目標"

objectives:
  functional:
    - id: "F1"
      description: "必填 - 來自規範的具體功能需求"
      acceptance_criteria:
        - "必填 - 具體、可測試的驗收條件"
  non_functional:
    - id: "N1"
      description: "必填 - 具體非功能需求"
      measurement: "必填 - 可測量目標（例如：p95 < 200ms，99.9%正常運行時間）"

scope:
  in_scope:
    - "必填 - 此任務包含的具體項目"
  out_of_scope:
    - "必填 - 明確排除的具體項目"

approach:
  architecture_overview: "必填 - 來自設計規範的具體架構"
  modules:
    - name: "必填 - 實際模組名稱"
      purpose: "必填 - 具體目的和職責"
      interfaces:
        - "必填 - 具體API/契約定義"
      reuse:
        - "列出要重用的現有模組/服務或說明'無'"
  data:
    schema_changes:
      - "必填 - 具體資料庫/資料結構變更"
    migrations:
      - "必填 - 具體遷移步驟或說明'不需要'"
  test_strategy:
    unit:
      - "必填 - 具體單元測試區域和方法"
    integration:
      - "必填 - 具體整合測試場景"
    acceptance:
      - "必填 - 具體驗收測試條件"
  quality_gates:
    - "必填 - 可測量品質條件（例如：>=90%單元涵蓋率，<500ms p95）"

milestones:
  - name: "<M1>"
    deliverables:
      - "<交付成果>"
    done_definition:
      - "<完成定義項目>"

timeline:
  start_date: "<YYYY-MM-DD>"
  end_date: "<YYYY-MM-DD>"
  schedule:
    - milestone: "<M1>"
      start: "<YYYY-MM-DD>"
      end: "<YYYY-MM-DD>"

dependencies:
  external:
    - "<服務/函式庫>"
  internal:
    - "<團隊/模組>"

estimation:
  method: "<T恤尺寸|故事點|小時>"
  summary:
    total_person_days: "<N>"
    confidence: "<低|中|高>"
  breakdown:
    - work_item: "<項目>"
      estimate: "<估算值>"

risks:
  - id: "R1"
    description: "<風險>"
    probability: "<低|中|高>"
    impact: "<低|中|高>"
    mitigation: "<緩解措施>"
    contingency: "<應急計劃>"

open_questions:
  - "<問題>"

notes:
  - "<備註>"

dev_notes:
  description: "開發者在實施過程中填寫的詳細記錄，包含所有修改內容與需求的對應關係"
  entries:
    - developer: "<開發者類型: frontend|backend|fullstack>"
      timestamp: "<YYYY-MM-DD HH:MM:SS>"
      task_phase: "<開發階段: 初始實施|迭代開發|修復|重構>"
      changes_summary: "<本次開發工作的整體摘要>"
      detailed_changes:
        - requirement_id: "<對應的需求ID或F-ID/N-ID>"
          change_description: "<具體修改內容>"
          files_modified:
            - "<修改的檔案路徑>"
          rationale: "<修改原因和設計考量>"
          testing_approach: "<針對此修改的測試方法>"
        - requirement_id: "<下一個需求ID>"
          change_description: "<下一個具體修改內容>"
          files_modified:
            - "<修改的檔案路徑>"
          rationale: "<修改原因和設計考量>"
          testing_approach: "<針對此修改的測試方法>"
      challenges_faced:
        - "<遭遇的技術挑戰或問題>"
      deviations_from_plan:
        - original_plan: "<原計劃內容>"
          actual_implementation: "<實際實施內容>"
          reason: "<偏離原因>"
      quality_metrics:
        - metric: "<品質指標名稱>"
          target: "<目標值>"
          achieved: "<實際達成值>"

re_dev_notes:
  description: "重新開發筆記：當任務需要重新開發時填寫。每次 re-dev 會覆蓋此欄位以避免舊資訊干擾"
  iteration: "<第幾次 re-dev：1|2|3|...>"
  developer_type: "<執行 re-dev 的開發者類型: frontend|backend|fullstack|refactor>"
  timestamp: "<YYYY-MM-DD HH:MM:SS>"
  trigger_reason: "<重新開發觸發原因: qa_review_failed|bug_found|requirement_change|performance_issue|other>"
  previous_attempt_summary: "<前次開發嘗試的簡要總結和失敗原因>"
  identified_root_causes:
    - category: "<問題分類: design|implementation|testing|requirements|technical_debt>"
      description: "<具體問題描述>"
      evidence: "<證據檔案路徑或參考資料>"
  re_dev_strategy:
    approach: "<重新開發策略: complete_rewrite|targeted_fix|architecture_change|incremental_improvement>"
    scope_changes: "<範圍變更說明或'無變更'>"
    architecture_changes: "<架構變更說明或'無變更'>"
    risk_mitigation: "<風險緩解措施>"
  implementation_changes:
    - target_id: "<對應的 F-ID 或 N-ID>"
      old_approach: "<舊的實施方法>"
      new_approach: "<新的實施方法>"
      rationale: "<變更理由>"
      impact_assessment: "<變更影響評估>"
  quality_improvements:
    testing_enhancements: "<測試改善措施>"
    code_quality_fixes: "<代碼品質修復項目>"
    performance_optimizations: "<效能優化措施>"
    security_hardening: "<安全強化措施>"
  success_criteria:
    - "<重新開發成功的驗收標準>"

